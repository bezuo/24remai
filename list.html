<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<meta name="apple-mobile-web-app-capable" content="yes"> <!-- IOS中Safari允许全屏浏览 -->
<meta name="apple-mobile-web-app-status-bar-style" content="black"> <!-- IOS中Safari顶端状态条样式 -->
<meta content="telephone=no, address=no" name="format-detection"> <!-- 忽略将数字变为电话号码 -->
<meta name="author" content="BeZuo">
<title>商品列表</title>
<link rel="Shortcut Icon" href="images/favicon.ico" />
<link type="text/css" rel="stylesheet" href="style/reset.min.css" />
<link type="text/css" rel="stylesheet" href="style/layout.min.css" />
<!-- nav模块样式 start -->
<link rel="stylesheet" type="text/css" href="style/gmu.min.css" />
<!-- nav模块样式 end -->
<!-- 数据加载动画 start -->
<link rel="stylesheet" type="text/css" href="style/loading.min.css" />
<!-- 数据加载动画 end -->
</head>

<body class="max">
<section class="layout">
	<!-- header start -->
	<header class="top-fixed list-top">
		<div class="ltop">
			<!-- <a data-href="#" class="fn-right icon-shore1"></a> -->
			<a data-href="index.html" class="fn-left back1"></a>
			<h1>亚马逊热卖榜单</h1>			
		</div>		
	</header>
	<!-- /header start -->

	<!-- article start -->
	<article class="content-box ui-refresh" style="padding-top:4.4rem;">
		<div class="ui-refresh-up"></div>    <!--setup方式带有class为ui-refresh-down或ui-refresh-up的元素必须加上，用于放refresh按钮-->		
		
		<div class="lists-box">
			<div class="l-banner">
				<div class="columns-img">
					<img data-url="images/list-banner.png" class="imgload" />
				</div>

				<div class="l-ban-bg">
					<p>“最新版Kindle历史新低价，Apple Watch货源充足”</p>
				</div>
			</div>

			<!-- 榜单列表 start -->
			<div class="lbox" data-href="detailed.html">
				<div class="lbox-top">
					<!--<span class="rectangle rectangle1">01</span>-->
					<p>24小时卖出<em>50,199</em>件 ，月销 <em>206.1</em>万件</p>
				</div>

				<div class="lbox-centent">
					<span class="l-imgbox"><img data-url="images/detail_01.jpg" alt="" class="imglazyload" /></span>
					<div class="lbox-cb">
						<h3>Kingston 金士顿 Class10 16G TF卡（micro SD）高速单反...</h3>
						<p><span class="now-price"><i>¥</i>29.90</span><em class="odd-price">¥54.00</em></p>
						<p>
							<span class="fn-right lbox-comm">4360</span>
							<span class="source-mall">亚马逊</span>
						</p>
					</div>
				</div>

				<!-- 编辑点评 -->
				<div class="lbox-btm">
					<div class="fn-clear">
						<span class="fn-left lbox-pic"><img src="images/detail-zhekou.png" /></span>
						<em class="fn-left lbox-name">马赛克兄</em>
						<span class="fn-left lbox-s">编辑点评</span>
					</div>
					<div class="lbox-text">
						<p>这款TRICALM 泉芙蔻 水润啫喱 ，美国进口，大大的好，60ml，可保湿、脱敏、止痒，帮助晒后修复，可用于日常肌肤护理，也可帮摆脱蚊虫...</p>
					</div>
				</div>
				<!-- /编辑点评 -->
			</div>

			<div class="lbox" data-href="detailed.html">
				<div class="lbox-top">
					<!--<span class="rectangle rectangle2">02</span>-->
					<p>24小时卖出 <em>50,199</em>件 ，月销<em>206.1</em>万件</p>
				</div>

				<div class="lbox-centent">
					<span class="l-imgbox"><img data-url="images/list_02.png" class="imglazyload" alt="" /></span>
					<div class="lbox-cb">
						<h3>Kingston 金士顿 Class10 16G TF卡（micro SD）高速单反...</h3>
						<p><span class="now-price"><i>¥</i>29.90</span><em class="odd-price">¥54.00</em></p>
						<p>
							<span class="fn-right lbox-comm">4360</span>
							<span class="source-mall">亚马逊</span>
						</p>
					</div>
				</div>
			</div>

			<div class="lbox" data-href="detailed.html">
				<div class="lbox-top">
					<!--<span class="rectangle rectangle3">03</span>-->
					<p><span>日销量：50,199件</span><span>月销量：206.1万件</span></p>
				</div>

				<div class="lbox-centent">
					<span class="l-imgbox"><img data-url="images/detail_01.jpg" class="imglazyload" alt="" /></span>
					<div class="lbox-cb">
						<h3>Kingston 金士顿 Class10 16G TF卡（micro SD）高速单反...</h3>
						<p><span class="now-price"><i>¥</i>29.90</span><em class="odd-price">¥54.00</em></p>
						<p>
							<span class="fn-right lbox-comm">4360</span>
							<span class="source-mall">亚马逊</span>
						</p>
					</div>
				</div>
			</div>

			<div class="lbox" data-href="detailed.html">
				<div class="lbox-top">
					<!--<span class="rectangle">04</span>-->
					<p><span>日销量：50,199件</span><span>月销量：206.1万件</span></p>
				</div>

				<div class="lbox-centent">
					<span class="l-imgbox"><img data-url="images/list_02.png" class="imglazyload" alt="" /></span>
					<div class="lbox-cb">
						<h3>Kingston 金士顿 Class10 16G TF卡（micro SD）高速单反...</h3>
						<p><span class="now-price"><i>¥</i>29.90</span><em class="odd-price">¥54.00</em></p>
						<p>
							<span class="fn-right lbox-comm">4360</span>
							<span class="source-mall">亚马逊</span>
						</p>
					</div>
				</div>
			</div>

			<div class="lbox" data-href="detailed.html">
				<div class="lbox-top">
					<!--<span class="rectangle">05</span>-->
					<p><span>日销量：50,199件</span><span>月销量：206.1万件</span></p>
				</div>

				<div class="lbox-centent">
					<span class="l-imgbox"><img data-url="images/list_02.png" class="imglazyload" alt="" /></span>
					<div class="lbox-cb">
						<h3>Kingston 金士顿 Class10 16G TF卡（micro SD）高速单反...</h3>
						<p><span class="now-price"><i>¥</i>29.90</span><em class="odd-price">¥54.00</em></p>
						<p>
							<span class="fn-right lbox-comm">4360</span>
							<span class="source-mall">亚马逊</span>
						</p>
					</div>
				</div>
			</div>

			<!-- /榜单列表 end -->
		</div>

		<div class="ui-refresh-down"></div>      <!--setup方式带有class为ui-refresh-down或ui-refresh-up的元素必须加上，用于放refresh按钮-->
	</article>
	<!-- /article end -->

	<!-- down start -->
	<div class="btm-down btm-fixed">
		<div class="color-line">
			<span style="background-color:rgb(60,210,233)"></span>
			<span style="background-color:rgb(255,239,81)"></span>
			<span style="background-color:rgb(255,180,115)"></span>
		</div>

		<a href="#" class="fn-right downApp">立即下载</a>
		<span class="close-box close-down"></span>
		<div class="logobox">
			<img src="images/logo.png" class="fn-left logo24" style="margin-left:0;" />
			<hgroup>
				<h2>24热卖</h2>
				<p>全网热卖好货排行榜</p>
			</hgroup>
		</div>
	</div>
	<!-- down end -->
</section>

<script type="text/javascript" src="js/zepto.min.js" ></script>
<script type="text/javascript" src="js/base.min.js" ></script>
<!-- 上下拉加载组件 statr -->
<script type="text/javascript" src="js/gmu.min.js"></script>
<!-- 上下拉加载组件 end -->
<script type="text/javascript">
$(function(){
	/* 时间导航栏 start */
//	var bar = $('.date-box span.bar');
//  var left = $('.date-box ul').offset().left;
//  $('.date-box').navigator({
//      select: function( e, index, li ){
//          bar.css({
//              left: li.offsetLeft - left,
//              width: li.childNodes[0].offsetWidth
//          });
//      },
//      ready: function() {
//          bar.appendTo($('.date-box').find('.ui-scroller'));
//      }
//  });
	/* 时间导航栏 end */

	/*组件初始化js start*/
	$('.ui-refresh').refresh({
	    load: function (dir, type) {
	        var me = this;
	        var promptUp = $("<div class='prompt-up'>没有更多内容了</div>");
	        var promptDown = $("<div class='prompt-down'>没有更多内容了</div>");

	        // 向上拉且上一次上拉请求数据不为空, 或下拉且上一次下拉请求数据不为空 	
	        if ($(".prompt-down").length === 0) {

	        	setTimeout(function(){
	        		// 向服务器发送一个请求, 并 
		            $.getJSON('json/list.json', function (data) {
			            var result = '',
			            	list = $('.lists-box');

		            	// 对请求回来的数据进行判断是否为空
		            	// 不为空：将请求回来的json数据拼接成字符串并将数据插入至对应的方向
		            	// 为空：则在直接禁用相应的拉动刷新且页面上添加提示 ———— 没有更多内容了
						if (data !== null) {

			                // 判断拉动方向将拼接的数据插入
			                list[dir == 'up' ? 'prepend' : 'append'](strList(data,result ));
			                //数据加载完成后改变状态
			            	me.afterDataLoading(dir);
			                // 图片延迟加载
							$(".imglazyload").lazyImgLoad({
								backgroundImg: "http://m.baokuandaren.com/baokuandaren/static/images/img-placeholder.png",
								distance: "50"
							});

		                } else {
				        	// 将没有更多数据友好提示添加至页面
		        			$(".ui-refresh-down").hide().children().removeClass();
			            	me.afterDataLoading(dir);
				        	return dir !== 'up' ? $(".ui-refresh").append(promptUp) : $(".ui-refresh").before(promptDown);
				        }
				    });
	        	},500);
	        }
	    }
	});
	/*组件初始化js end */

	// 字符串拼接
	function strList(data,result){
		for(var i = 0; i < data.lists.length; i++){
            
			result +=	"<div class='lbox' data-href=" +data.lists[i].link+ ">"
							+"<div class='lbox-top'>"
								+"<p><span>日销量：" +data.lists[i].mall+ "件</span><span>月销量：206.1万件</span></p>"
							+"</div>"

							+"<div class='lbox-centent'>"
								+"<span class=l-imgbox><img data-url= "+data.lists[i].pic+" data-alt="+data.lists[i].title+" class=imglazyload ></span>"
								+"<div class='lbox-cb'>"
									+"<h3>"+ data.lists[i].title +"</h3>"
									+"<p><span class='now-price'><i>¥</i>"+ data.lists[i].price +"</span><em class='odd-price'>¥54.00</em></p>"
									+"<p>"
										+"<span class='fn-right lbox-comm'>"+ data.lists[i].say +"</span>"
										+"<span class='source-mall'>"+ data.lists[i].platform +"</span>"
									+"</p>"
								+"</div>"
							+"</div>"
						+"</div>"
        };
        return result;
	}


	// 图片延迟加载
	$(".imglazyload").lazyImgLoad({
		backgroundImg: "http://m.baokuandaren.com/baokuandaren/static/images/img-placeholder.png",
		distance: "50"
	});

	$(".imgload").lazyImgLoad({
		backgroundImg: "images/columns-placeholder.png",
		distance: "50"
	});
});
</script>
</body>
</html>
